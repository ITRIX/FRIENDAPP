/*7c145b902a887e8254e45321dbe0901ff8384277*/Ext.define("Ext.ux.TouchCalendarView",{extend:"Ext.Container",xtype:"touchcalendar",config:{viewMode:"month",weekStart:1,todayCls:"today",selectedItemCls:"selected",unselectableCls:"unselectable",prevMonthCls:"prev-month",nextMonthCls:"next-month",weekendCls:"weekend",prevPeriodCls:"goto-prev",nextPeriodCls:"goto-next",selectPeriodCls:"goto-mnth",dayTimeSlotSize:30,value:null,store:null,baseTpl:['<table class="{[this.me.getViewMode().toLowerCase()]}">',"<thead>","<tr>",'<tpl for="this.getDaysArray(values)">','<th class="{[this.getHeaderClass(xindex)]}">','<tpl if="xindex === 4">','<span>{[Ext.Date.format(this.me.currentDate, "F")]} {[Ext.Date.format(this.me.currentDate, "Y")]}</span>',"</tpl>",'{date:date("D")}',"</th>","</tpl>","</tr>","</thead>","<tbody>","<tr>",'<tpl for=".">','<td class="time-block {[this.getClasses(values)]}" datetime="{[this.me.getDateAttribute(values.date)]}">','{date:date("j")}',"</td>",'<tpl if="this.isEndOfRow(xindex)">',"</tr>",'<tpl if="!this.isEndOfPeriod(xindex)">',"<tr>","</tpl>","</tpl>","</tpl>","</tr>","</tbody>","</table>"],cls:"touch-calendar-view",itemSelector:"td.time-block"},commonTemplateFunctions:{getClasses:function(a){var b=[];if(a.selected){b.push(this.me.getSelectedItemCls())}if(a.unselectable){b.push(this.me.getUnselectableCls())}if(a.prevMonth){b.push(this.me.getPrevMonthCls())}if(a.nextMonth){b.push(this.me.getNextMonthCls())}if(a.weekend){b.push(this.me.getWeekendCls())}if(a.today){b.push(this.me.getTodayCls())}return b.join(" ")},isEndOfRow:function(a){return(a%7)===0&&(a>0)},isStartOfRow:function(a){return((a-1)%7)===0&&(a-1>=0)},getDaysArray:function(a){var c=[],b;for(b=0;b<this.me.periodRowDayCount;b++){c.push(a[b])}return c},getHeaderClass:function(a){return a===1?this.me.getPrevPeriodCls():a===7?this.me.getNextPeriodCls():""}},constructor:function(b){this.initModel();var a=Ext.create("Ext.data.Store",{model:"TouchCalendarViewModel"});this.store=a;this.setStore(a);Ext.apply(this,b||{});this.callParent(arguments);this.minDate=this.minDate?Ext.Date.clearTime(this.minDate,true):null;this.maxDate=this.maxDate?Ext.Date.clearTime(this.maxDate,true):null;this.refresh()},initialize:function(){this.callParent();this.element.on({tap:this.onTableHeaderTap,scope:this,delegate:"th"});this.element.on({tap:this.onTimeSlotTap,scope:this,delegate:this.getItemSelector()});this.on({painted:this.syncHeight,scope:this})},initModel:function(){if(!Ext.ModelManager.isRegistered("TouchCalendarViewModel")){Ext.define("TouchCalendarViewModel",{extend:"Ext.data.Model",config:{fields:[{name:"date",type:"date"},{name:"today",type:"boolean"},{name:"unselectable",type:"boolean"},{name:"selected",type:"boolean"},{name:"prevMonth",type:"boolean"},{name:"nextMonth",type:"boolean"},{name:"weekend",type:"boolean"},"timeSlots"]}})}},updateViewMode:function(a,b){this.refresh()},applyViewMode:function(b){var a=Ext.ux.TouchCalendarView[b.toUpperCase()];this.getStartDate=a.getStartDate;this.getTotalDays=a.getTotalDays;this.dateAttributeFormat=a.dateAttributeFormat;this.getNextIterationDate=a.getNextIterationDate;this.getDeltaDate=a.getDeltaDate;this.periodRowDayCount=a.periodRowDayCount;Ext.apply(this.commonTemplateFunctions,{me:this});this.setTpl(new Ext.XTemplate((a.tpl||this.getBaseTpl()).join(""),this.commonTemplateFunctions));this.setScrollable(b.toUpperCase()==="DAY"?"vertical":false);return b},collectData:function(a){var b=[];Ext.each(a,function(c,d){b.push(c.data)},this);return b},populateStore:function(b){this.currentDate=this.currentDate||this.value||new Date();var e=true,f=this.currentDate,d=this.getStartDate(f),g=this.getTotalDays(f),a;this.getStore().suspendEvents();this.getStore().data.clear();for(var c=0;c<g;c++){d=this.getNextIterationDate(d,(c===0?0:1));e=(this.minDate&&d<this.minDate)||(this.maxDate&&d>this.maxDate);a=Ext.create("TouchCalendarViewModel",{today:this.isSameDay(d,new Date()),unselectable:e,selected:this.isSameDay(d,this.value)&&!e,prevMonth:(d.getMonth()<f.getMonth()),nextMonth:(d.getMonth()>f.getMonth()),weekend:this.isWeekend(d),date:d});this.getStore().add(a)}this.getStore().resumeEvents()},refreshDelta:function(f,d){var c=this;var b=this.currentDate||new Date();var a=this.getDeltaDate(b,f);if(this.isOutsideMinMax(a)){return}this.currentDate=a;this.refresh(d);var e=this.getPeriodMinMaxDate()},getPeriodMinMaxDate:function(){return{min:this.getStore().data.first(),max:this.getStore().data.last()}},isOutsideMinMax:function(a){var b=false;if(this.viewMode==="MONTH"){b=((this.minDate&&a.getLastDateOfMonth()<this.minDate)||(this.maxDate&&a.getFirstDateOfMonth()>this.maxDate))}else{b=((this.minDate&&this.getWeekendDate(a)<this.minDate)||(this.maxDate&&this.getStartDate(a)>this.maxDate))}return b},onTableHeaderTap:function(f,c){c=Ext.fly(c);if(c.hasCls(this.getPrevPeriodCls())||c.hasCls(this.getNextPeriodCls())){this.refreshDelta(c.hasCls(this.getPrevPeriodCls())?-1:1)}else{if(c.hasCls(this.getSelectPeriodCls())){var b=this;var g=function(){var h=b.currentDate.getTime();var e=new Date().getTime();b.onDatePickerChange(h,e,{today:true});d.hide()};var a=this.currentDate;var d=Ext.create("Ext.ux.DateTimePicker",{slotOrder:["month","year"],daySlotEnabled:false,yearFrom:(new Date().getFullYear()-1),yearTo:(new Date().getFullYear()+1),toolbar:{items:[{xtype:"button",text:"Today",ui:"action",align:"right",handler:g}]},listeners:{cancel:function(){},change:function(h,e){var j=b.currentDate.getTime();var i=new Date(e.getFullYear(),e.getMonth(),1).getTime();b.onDatePickerChange(j,i,{datePicker:i})},show:function(){d.setValueAnimated({month:a.getMonth()+1,year:a.getFullYear()})}}});Ext.Viewport.add(d);d.show()}}},onDatePickerChange:function(d,c,b){var a=1000*60*60*24;var e=Math.floor((Math.ceil((c-d)/a))/this.periodRowDayCount);if(e===0){return}this.refreshDelta(e,b)},onTimeSlotTap:function(d){var c=Ext.fly(d.getTarget());this.selectCell(c);var b=this.getCellDate(c);var a=this.getValue();this.setValue(b);this.fireEvent("selectionchange",this,b,a)},refresh:function(b,d){var c=this;var a=null;setTimeout(function(){c.populateStore(b);a=c.getStore().getRange();c.setData(c.collectData(a));c.syncHeight();d&&d()},5)},syncHeight:function(){if(this.getViewMode().toUpperCase()!=="DAY"){var a=this.element.select("table");if(a&&a.elements.length>0){a.first().setHeight(this.element.getHeight())}}},selectCell:function(a){var b=this.getSelectedItemCls();var d=this.element.select("td."+b).first();while(d){if(d){d.removeCls(b)}d=this.element.select("td."+b).first()}a.addCls(b);var e="selectedHeaders";var c=this.element.select("th."+e).first();if(c){c.removeCls(e)}},getDateRecord:function(a){return this.getStore().findBy(function(b){var c=Ext.Date.clearTime(b.get("date"),true).getTime();return c===Ext.Date.clearTime(a,true).getTime()},this)},getDayStartDate:function(a){return a},isSameDay:function(b,a){if(!b||!a){return false}return Ext.Date.clearTime(b,true).getTime()===Ext.Date.clearTime(a,true).getTime()},isWeekend:function(a){return a.getDay()===0||a.getDay()===6},getWeekendDate:function(b){var a=b.getDay()-this.getWeekStart();a=a<0?6:a;return new Date(b.getFullYear(),b.getMonth(),b.getDate()+0+a)},getCellDate:function(b){var a=b.dom.getAttribute("datetime");return this.stringToDate(a)},getDateCell:function(a){return this.element.select('td[datetime="'+this.getDateAttribute(a)+'"]').first()},getDateAttribute:function(a){return Ext.Date.format(a,this.dateAttributeFormat)},stringToDate:function(a){return Ext.Date.parseDate(a,this.dateAttributeFormat)},statics:{MONTH:{dateAttributeFormat:"d-m-Y",getNextIterationDate:function(b,a){return new Date(b.getFullYear(),b.getMonth(),b.getDate()+(a===0?0:1))},getTotalDays:function(a){var b=Ext.Date.getFirstDateOfMonth(a);return this.isWeekend(b)?42:35},getStartDate:function(a){return Ext.bind(Ext.ux.TouchCalendarView.WEEK.getStartDate,this)(new Date(a.getFullYear(),a.getMonth(),1))},getDeltaDate:function(b,d){var c=b.getMonth()+d,a=new Date(b.getFullYear(),c,1);a.setDate(Ext.Date.getDaysInMonth(a)<b.getDate()?Ext.Date.getDaysInMonth(a):b.getDate());return a},periodRowDayCount:7},WEEK:{dateAttributeFormat:"d-m-Y",getNextIterationDate:function(b,a){return new Date(b.getFullYear(),b.getMonth(),b.getDate()+(a===0?0:1))},getTotalDays:function(a){return 4},getStartDate:function(b){var a=b.getDay()-this.getWeekStart();a=a<0?3:0;return new Date(b.getFullYear(),b.getMonth(),b.getDate()-0)},getDeltaDate:function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(b*this.periodRowDayCount))},periodRowDayCount:4},DAY:{dateAttributeFormat:"d-m-Y H:i",tpl:['<table class="{[this.me.getViewMode().toLowerCase()]}">',"<thead>","<tr>",'<th class="{[this.me.getPrevPeriodCls()]} style="display: block;">',"</th>","<th>",'<span style="position: static;">{[Ext.Date.format(values[0].date, "D jS M Y")]}</span>',"</th>",'<th class="{[this.me.getNextPeriodCls()]} style="display: block;"">',"</th>","</tr>","</thead>","<tbody>",'<tpl for=".">',"<tr>",'<td class="time-block" datetime="{[this.me.getDateAttribute(values.date)]}" colspan="3">','{date:date("H:i")}',"</td>","</tr>","</tpl>","</tbody>","</table>"],getNextIterationDate:function(b,a){var c=b.getTime()+((a===0?0:1)*(this.getDayTimeSlotSize()*60*1000));return new Date(c)},getTotalDays:function(a){return 1440/this.getDayTimeSlotSize()},getStartDate:function(a){return Ext.Date.clearTime(a,true)},getDeltaDate:function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+b)},periodRowDayCount:1}}});Ext.define("Ext.ux.TouchCalendar",{extend:"Ext.carousel.Carousel",requires:["Ext.ux.TouchCalendarView"],xtype:"calendar",enableSwipeNavigate:true,enableSimpleEvents:false,enableEventBars:false,viewConfig:{},defaultViewConfig:{mode:"MONTH",weekStart:1,bubbleEvents:["selectionchange"]},indicator:false,initialize:function(){this.viewConfig=Ext.applyIf(this.viewConfig||{},this.defaultViewConfig);this.viewConfig.currentDate=this.viewConfig.currentDate||this.viewConfig.value||new Date();this.mode=this.viewConfig.mode.toUpperCase();this.initViews();Ext.apply(this,{cls:"touch-calendar",activeItem:(this.enableSwipeNavigate?1:0),direction:"horizontal"});this.setIndicator(false);this.setActiveItem(1);this.on("selectionchange",this.onSelectionChange);this.on("activeitemchange",this.onActiveItemChange);if(this.enableSwipeNavigate){this.on(this.element,{drag:this.onDrag,dragThreshold:5,dragend:this.onDragEnd,direction:this.direction,scope:this});this.element.addCls(this.baseCls+"-"+this.direction)}},getViewConfig:function(b){var a=[];if(this.enableSimpleEvents){a.push(new Ext.ux.TouchCalendarSimpleEvents())}else{if(this.enableEventBars){a.push(new Ext.ux.TouchCalendarEvents())}}Ext.apply(this.viewConfig,{plugins:a,currentDate:b,onTableHeaderTap:Ext.bind(this.onTableHeaderTap,this)});return this.viewConfig},getViewDate:function(a,b){var d=(this.mode==="WEEK"?"DAY":this.mode.toUpperCase()),c=(this.mode==="WEEK"?(8*b):b);return a.add(Date[d],c)},initViews:function(){var c=[];var f=this.viewConfig.currentDate.clone(),d=(this.enableSwipeNavigate?-1:0),a=(this.enableSwipeNavigate?1:0),b=[];var e=this.getViewDate(f,-1);c.push(new Ext.ux.TouchCalendarView(Ext.applyIf({currentDate:e},this.getViewConfig(e))));c.push(new Ext.ux.TouchCalendarView(this.getViewConfig(f)));e=this.getViewDate(f,1);c.push(new Ext.ux.TouchCalendarView(Ext.applyIf({currentDate:e},this.getViewConfig(e))));this.setItems(c);this.view=c[(this.enableSwipeNavigate?1:0)]},onTableHeaderTap:function(b,a){a=Ext.fly(a);if(a.hasCls(this.view.prevPeriodCls)||a.hasCls(this.view.nextPeriodCls)){this[(a.hasCls(this.view.prevPeriodCls)?"prev":"next")]()}},setMode:function(a){this.mode=a.toUpperCase();this.viewConfig.mode=this.mode;this.getItems().each(function(b,c){b.currentDate=this.getViewDate(this.view.currentDate.clone(),c-1);b.setMode(a,true);b.refresh()},this)},getValue:function(){var a=this.view.getSelectionModel().selected;return(a.getCount()>0)?a.first().get("date"):null},setValue:function(a){this.view.setValue(a)},onActiveItemChange:function(b,a,f){if(this.enableSwipeNavigate){var c=this.getItems();var e=c.indexOf(a),h=c.indexOf(f),g=(e>h)?"forward":"backward";this.counter=(this.counter||0)+1;if(g==="forward"){this.remove(c.get(0));var d=new Ext.ux.TouchCalendarView(this.getViewConfig(a.currentDate.add(Date[this.mode],1)));this.add(d)}else{this.remove(c.get(c.getCount()-1));var d=new Ext.ux.TouchCalendarView(this.getViewConfig(a.currentDate.add(Date[this.mode],-1)));this.insert(0,d)}this.view=a}}});Ext.define("FRIENDAPP.model.userExpenModel",{extend:"Ext.data.Model",config:{fields:[{name:"id",type:"int"},{name:"date",type:"string"},{name:"amount",type:"int"},{name:"expen",type:"string"},]}});Ext.define("FRIENDAPP.model.UserDataModel",{extend:"Ext.data.Model",config:{fields:[{name:"id",type:"int"},{name:"username",type:"string"},{name:"password",type:"string"},{name:"status",type:"string"},{name:"theme",type:"string"},]}});Ext.define("FRIENDAPP.model.GraphModel",{extend:"Ext.data.Model",config:{fields:[{name:"id",type:"int"},{name:"month",type:"string"},{name:"amount",type:"int"},{name:"year",type:"string"}]}});Ext.define("FRIENDAPP.model.YearModel",{extend:"Ext.data.Model",config:{fields:[{name:"id",type:"int"},{name:"amount",type:"int"},{name:"year",type:"string"},]}});Ext.define("FRIENDAPP.view.Login",{extend:"Ext.form.Panel",xtype:"loginview",requires:["Ext.form.FieldSet","Ext.field.Text","Ext.field.Password"],config:{layout:{type:"vbox",align:"middle"},cls:"loginview",scrollable:false,items:[{xtype:"panel",height:5,cls:"ribbonCls",width:"100%",docked:"top"},{xtype:"spacer"},{xtype:"image",mode:"element",width:"322px",height:"133px",src:"resources/images/logo.png"},{xtype:"spacer",height:"30px"},{xtype:"fieldset",name:"loginForm",width:"90%",items:[{xtype:"textfield",name:"username",id:"usernameid",placeHolder:"Username or Email Address",required:true},{xtype:"passwordfield",name:"password",id:"passwordid",placeHolder:"Password",required:true},{xtype:"checkboxfield",label:"Stay Signed In?",labelWidth:"75%",itemId:"rememberPassword"}]},{xtype:"button",id:"loginButton",width:"30%",text:"LOGIN",ui:"login"},{xtype:"spacer",height:"10px"},{xtype:"panel",itemId:"validateMessage",height:"50px",width:"90%"},{xtype:"spacer"},{xtype:"panel",height:5,cls:"ribbonCls",width:"100%",docked:"bottom"},]}});Ext.define("FRIENDAPP.view.LicenceView",{extend:"Ext.Panel",xtype:"MainFrameLicenceView",config:{fullscreen:true,layout:"card",title:"Email",activeItem:0,items:[{xtype:"toolbar",cls:"mainToolbar",docked:"top",itemId:"dateLabel",name:"dateLabel",title:"Pocket Finder App",items:[{xtype:"spacer"},{xtype:"spacer"}]},{xtype:"panel",height:5,cls:"ribbonCls",width:"100%",docked:"top"},{xtype:"FrameLicence"},{xtype:"FormPasswordChange"}]}});Ext.define("FRIENDAPP.view.Licence",{extend:"Ext.Panel",requires:["Ext.field.Radio"],xtype:"FrameLicence",config:{scrollable:true,fullscreen:true,layout:{type:"vbox",align:"middle"},title:"Email",activeItem:0,items:[{xtype:"toolbar",docked:"bottom",items:[{xtype:"spacer"},{text:"Next",itemId:"btn_licence_next",hidden:true},]},{xtype:"panel",cls:"graphPanelCls",html:"<body style='text-align: justify;'><div> \n    <strong>Software license terms and conditions</strong> \n</div>\n<div>\n    <br/>\n</div>\n<div>\n    (a) Single-User License Grant.\n</div>\n<div>\n    This Section 2.2(a) applies only to a Customer whose License and Authorization Key document issued by\n</div>\n<div>\n    ITRIX specifies the “License Type” as “Single User”. A Single-User License is for a named individual\n</div>\n<div>\n    who is identified as the only Authorized User.\n</div>\n<div>\n    <br/>\n</div>\n<div>\n    <strong>2.7 Restrictions.</strong>\n</div>\n<div>\n    Customer shall not, nor permit any person (including any Authorized User) to:\n</div>\n<div>\n    (i) reverse engineer, reverse\n</div>\n<div>\n    compile, decry pt, disassemble, or otherwise attempt to derive the source code of the Licensed Software\n</div>\n<div>\n    (except to the extent that this restriction is expressly prohibited by law);\n</div>\n<div>\n    (ii) modify, translate, or create derivative works of the Licensed Software; (iii) sublicense, resell, rent, lease, distribute, market, commercialize, or\n    otherwise transfer rights or usage to the Licensed Software (except as expressly permitted under this Agreement);\n</div>\n<div>\n    <br/>\n</div>\n<div>\n    <strong>3.1 Technical Support.</strong>\n</div>\n<div>\n    ITRIX agrees to provide Customer with technical support services which include periodic distribution of bug fixes and minor enhancements as Updates\n    scheduled by ITRIX. All registered users of the then-current release\n</div>\n<div>\n    of App and the previous release of App are eligible for free limited technical support.\n</div>\n<div>\n    <br/>\n</div>\n<div>\n    <strong>CONFIDENTIALITY.</strong>\n</div>\n<div>\n    Customer and ITRIX agree to maintain the confidentiality of any confidential or proprietary information of\n</div>\n<div>\n    one party (the “disclosing party”) received by the other party (the “receiving party”) during, or prior to\n</div>\n<div>\n    entering into, this Agreement that the receiving party should know is considered confidential or proprietary\n</div>\n<div>\n    by the disclosing party based on the circumstances surrounding the disclosure, including, without limitation,\n</div>\n<div>\n    non-public technical and business information (“Confidential Information”).\n</div><body>\n "},{xtype:"panel",width:"100%",layout:{type:"hbox",align:"middle"},docked:"bottom",items:[{xtype:"radiofield",name:"allow",value:"true",width:"50%",labelWidth:"60%",label:"I Accept"},{xtype:"radiofield",name:"allow",value:"false",width:"50%",labelWidth:"60%",label:"I Decline"}]},]}});Ext.define("FRIENDAPP.view.PasswordChange",{extend:"Ext.form.FormPanel",xtype:"FormPasswordChange",requires:["Ext.form.FieldSet","Ext.field.Text","Ext.field.Password"],config:{iconMask:true,ui:"confirm-round",iconCls:"compose",title:"Add Expen",styleHtmlContent:true,scrollable:false,cls:"loginview",height:"100%",width:"100%",layout:{type:"vbox",align:"middle"},items:[{xtype:"toolbar",docked:"bottom",items:[{text:"Save",itemId:"btn_pass_save"},{text:"Update",itemId:"btn_pass_update",hidden:true},{xtype:"spacer"},{text:"Reset",itemId:"btn_pass_reset"}]},{xtype:"spacer"},{xtype:"fieldset",width:"100%",cls:"expenfieldcls",height:"100%",items:[{xtype:"textfield",name:"text_username",itemId:"text_username",label:"User Name"},{xtype:"passwordfield",name:"text_password",itemId:"text_password",label:"Password"},{xtype:"passwordfield",name:"text_cpassword",itemId:"text_cpassword",label:"Confirm Password"},]},{xtype:"panel",itemId:"formValidateMsg",height:"50px",cls:"validatemsg",width:"90%"},{xtype:"spacer"},]}});Ext.define("FRIENDAPP.controller.Main",{extend:"Ext.app.Controller",config:{currentDate:"",refs:{calendar:"MainFrameview touchcalendar[title=Calendar]",expenseList:"userExpenListView1",expenList:"userExpenListView1 #expenseList",mainFrame:"MainFrameview",mainFrameCal:"MainFrameCalender",backButton:"MainFrameCalender button[action=back]",dateLabel:"MainFrameview toolbar[name=dateLabel]",totalAmtLabel:"userExpenListView1 #totalAmtLabel"},control:{calendar:{selectionchange:"onDateSelection",activate:"removeBackLabel"},backButton:{tap:"itemTap"},mainFrameCal:{initialize:"removeBackLabel"}}},itemTap:function(){var b=this.getMainFrameCal();var a=b.getActiveItem();switch(a.xtype){case"userExpenListView1":b.setActiveItem(0);break;case"AddExpenForm":b.setActiveItem(this.getExpenseList());break}},onDateSelection:function(){if(!this.getExpenseList()){var b=Ext.create("FRIENDAPP.view.userExpenListView")}this.currentDate=Ext.util.Format.date(this.getCalendar().getValue(),"d M Y");this.getDateLabel().setTitle(this.currentDate);var a=Ext.getStore("UserExpenseStore");a.load();a.clearFilter();a.filter("date",Ext.util.Format.date(this.getCalendar().getValue(),"d M Y"));this.getBackButton().setHidden(false);this.getMainFrameCal().setActiveItem(this.getExpenseList())},removeBackLabel:function(){this.getBackButton().setHidden(true)}});Ext.define("FRIENDAPP.controller.ExpenListController",{extend:"Ext.app.Controller",config:{refs:{expenseList:"userExpenListView1 #expenseList",mainFrame:"MainFrameview",addExpenForm:"AddExpenForm",dateField:"AddExpenForm #date",delButton:"AddExpenForm #expenseFormDelete",updateButton:"AddExpenForm #expenseFormUpdate",saveButton:"AddExpenForm #expenseFormSave",resetButton:"AddExpenForm #expenseFormReset",expenAddBut:"userExpenListView1 #expenAdd",mainFrameCal:"MainFrameCalender",calendar:"MainFrameview touchcalendar[title=Calendar]",totalAmtLabel:"userExpenListView1 #totalAmtLabel",formValidateMsg:"AddExpenForm #formValidateMsg"},control:{expenseList:{itemtap:"itemDoubleTap",refresh:"calTotalAmt"},expenAddBut:{tap:"itemTap"}}},itemTap:function(){if(!this.getAddExpenForm()){var a=Ext.create("FRIENDAPP.view.AddExpenForm")}this.getAddExpenForm().reset();this.getDateField().setValue(new Date(this.getCalendar().getValue()));this.getDelButton().setHidden(true);this.getUpdateButton().setHidden(true);this.getSaveButton().setHidden(false);this.getResetButton().setHidden(false);this.getMainFrameCal().setActiveItem(this.getAddExpenForm());this.getFormValidateMsg().setHtml("")},itemDoubleTap:function(b,c,h,a,g,d){if(!this.getAddExpenForm()){var f=Ext.create("FRIENDAPP.view.AddExpenForm")}this.getAddExpenForm().reset();this.getAddExpenForm().setValues({date:new Date(a.get("date")),amount:a.get("amount"),expen:a.get("expen")});this.getDelButton().setHidden(false);this.getUpdateButton().setHidden(false);this.getSaveButton().setHidden(true);this.getResetButton().setHidden(true);this.getFormValidateMsg().setHtml("");this.getMainFrameCal().setActiveItem(this.getAddExpenForm())},calTotalAmt:function(){var b=Ext.getStore("UserExpenseStore");var c,a;c=0,a=0;while(b.getCount()>c){a=a+b.getAt(c).get("amount");c++}this.getTotalAmtLabel().setText("Total Amount  : "+a);return a},calculateOtherStores:function(){var b,g,l,a,j,c,d;g=false;b=FRIENDAPP.app.getController("Main").currentDate;j=Ext.getStore("DailyExpenseStore");j.clearFilter();j.load();g=j.find("date",b);l=0;c=this.calTotalAmt();if(g!=-1){d=j.getAt(g);l=d.get("amount");d.set("amount",c)}else{j.add({date:b,amount:c})}j.sync();j.load();var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var f=new Date(b).getMonth();var h=new Date(b).getFullYear();var e=Ext.getStore("YearStore");e.clearFilter();g=e.find("year",h);if(g!=-1){d=e.getAt(g);a=d.get("amount")+(c-l);d.set("amount",a)}else{e.add({amount:c,year:h})}var i=Ext.getStore("MonthStore");i.clearFilter();i.filter("year",h);g=i.find("month",k[f]);if(g!=-1){d=i.getAt(g);c=d.get("amount")+(c-l);d.set("amount",c)}else{i.add({month:k[f],amount:c,year:h})}i.clearFilter()}});Ext.define("FRIENDAPP.controller.ExpenReportController",{extend:"Ext.app.Controller",config:{refs:{reportMonthWise:"MainFrameReport #monthWise",reportYearWise:"MainFrameReport #yearWise",reportDayWise:"MainFrameReport #dayWise",reportTotalText:"MainFrameReport #reportTotalText",reportList:"ExpenReport #expenseListReport",reportSelect:"MainFrameReport #select_type"},control:{reportMonthWise:{change:"onMonthSort"},reportYearWise:{change:"onYearSort"},reportDayWise:{change:"onDaySort"},reportSelect:{change:"onSortChange"},reportList:{refresh:"calTotalReport"}}},onSortChange:function(e,d,b,c){var a=Ext.getStore("UserExpenseStore");switch(e.getValue()){case"day":a.clearFilter();this.getReportYearWise().setHidden(true);this.getReportMonthWise().setHidden(true);this.getReportDayWise().setHidden(false);var d=new Date(this.getReportDayWise().getValue());this.onDaySort(e,d,b);break;case"month":a.clearFilter();this.getReportYearWise().setHidden(true);this.getReportMonthWise().setHidden(false);this.getReportDayWise().setHidden(true);var d=new Date(this.getReportMonthWise().getValue());this.onMonthSort(e,d,b);break;case"year":a.clearFilter();this.getReportYearWise().setHidden(false);this.getReportMonthWise().setHidden(true);this.getReportDayWise().setHidden(true);var d=new Date(this.getReportYearWise().getValue());this.onYearSort(e,d,b);break;case"refresh":a.clearFilter();break}},onMonthSort:function(d,c,b){var a=Ext.getStore("UserExpenseStore");a.clearFilter();a.filter(function(f){var g=new Date(f.get("date")).getMonth();var e=new Date(f.get("date")).getYear();if(g===c.getMonth()&&e===c.getYear()){return true}})},onYearSort:function(d,c,b){var a=Ext.getStore("UserExpenseStore");a.clearFilter();a.filter(function(f){var e=new Date(f.get("date")).getYear();if(e===c.getYear()){return true}})},onDaySort:function(d,c,b){var a=Ext.getStore("UserExpenseStore");a.clearFilter();a.filter(function(g){var e=new Date(g.get("date")).getDate();var h=new Date(g.get("date")).getMonth();var f=new Date(g.get("date")).getYear();if(e===c.getDate()&&h===c.getMonth()&&f===c.getYear()){return true}})},calTotalReport:function(){var b=Ext.getStore("UserExpenseStore");var c,a;c=0,a=0;while(b.getCount()>c){a=a+b.getAt(c).get("amount");c++}this.getReportTotalText().setText("Total Amount  : "+a)}});Ext.define("FRIENDAPP.controller.LicenceController",{extend:"Ext.app.Controller",config:{refs:{radioButtnobj:"FrameLicence radiofield[name=allow]",nextButton:"FrameLicence #btn_licence_next",mainFrameLicenceView:"MainFrameLicenceView"},control:{nextButton:{tap:"onNextButtonTap"},radioButtnobj:{uncheck:"onRadioChecked"}}},onRadioChecked:function(c,b,a){if(c.getValue()=="true"){this.getNextButton().setHidden(false);return}else{this.getNextButton().setHidden(true);return}},onNextButtonTap:function(){this.getMainFrameLicenceView().setActiveItem(1)}});Ext.define("FRIENDAPP.controller.PasswordChangeController",{extend:"Ext.app.Controller",config:{refs:{mainFrame:"MainFrameview",passwordChangeForm:"FormPasswordChange",saveButton:"FormPasswordChange #btn_pass_save",resetButton:"FormPasswordChange #btn_pass_reset",updateButton:"FormPasswordChange #btn_pass_update",mainPanel:"MainPanel",usernameField:"FormPasswordChange #text_username",passwordField:"FormPasswordChange #text_password",cpasswordField:"FormPasswordChange #text_cpassword",formValidateMsg:"FormPasswordChange #formValidateMsg"},control:{resetButton:{tap:"itemReset"},saveButton:{tap:"itemSave"},updateButton:{tap:"itemUpdate"}}},itemReset:function(){this.getPasswordChangeForm().reset();this.getFormValidateMsg().setHtml("")},itemSave:function(){if(this.dataValidate()){var a=Ext.getStore("UserDataStore");a.add({username:this.getUsernameField().getValue(),password:this.getPasswordField().getValue(),status:"no",theme:"./resources/css/app.css"});a.sync();a.load();window.location.reload()}},itemUpdate:function(){if(this.dataValidate()){var a=Ext.getStore("UserDataStore");if(this.getUsernameField().getValue()!==a.getById(1).get("username")){this.getFormValidateMsg().setHtml("Username with existing username not match!...");return}else{var b=a.getById(1);b.set("username",this.getUsernameField().getValue());b.set("password",this.getPasswordField().getValue());a.sync();a.load();this.getFormValidateMsg().setHtml("Password change successfully!...");this.itemReset()}}},dataValidate:function(){if(!this.getUsernameField().getValue()||FRIENDAPP.util.util.isBlank(this.getUsernameField().getValue())){this.getFormValidateMsg().setHtml("Please enter username !...");return false}if(!this.getPasswordField().getValue()||FRIENDAPP.util.util.isBlank(this.getPasswordField().getValue())){this.getFormValidateMsg().setHtml("Please enter password !...");return false}if(!this.getCpasswordField().getValue()||FRIENDAPP.util.util.isBlank(this.getCpasswordField().getValue())){this.getFormValidateMsg().setHtml("Please enter confirm password !...");return}if(this.getPasswordField().getValue()!==this.getCpasswordField().getValue()){this.getFormValidateMsg().setHtml("Password confirm password not match !...");return false}return true}});Ext.define("FRIENDAPP.controller.GraphController",{extend:"Ext.app.Controller",config:{refs:{graphDate:"graphChart datepickerfield[name=graphdate]",calendar1:"graphChart"},control:{graphDate:{change:"onGraphFilter"}}},onGraphFilter:function(d,a,c,b){Ext.getStore("MonthStore").clearFilter();Ext.getStore("MonthStore").filter("year",a.getFullYear())},onActive:function(){alert()}});Ext.define("FRIENDAPP.controller.ThemeController",{extend:"Ext.app.Controller",config:{refs:{defaultThemeButton:"themePanel #defaultThemeButton",blackThemeButton:"themePanel #blackThemeButton",pinkThemeButton:"themePanel #pinkThemeButton"},control:{defaultThemeButton:{tap:"onThemeSelect"},blackThemeButton:{tap:"onThemeSelect"},pinkThemeButton:{tap:"onThemeSelect"}}},onThemeSelect:function(f,g,d){var c=Ext.getStore("UserDataStore");c.load();var h=c.getById(1);var b=FRIENDAPP.util.util.themeSelector();switch(f.getText()){case"Default":b.href="./resources/css/app.css";h.set("theme","./resources/css/app.css");break;case"Pink":b.href="./resources/css/themePink.css";h.set("theme","./resources/css/themePink.css");break;case"Black":b.href="./resources/css/default.css";h.set("theme","./resources/css/default.css");break}c.sync();c.load()}});Ext.define("FRIENDAPP.store.UserExpenseStore",{extend:"Ext.data.JsonStore",requires:["Ext.data.proxy.LocalStorage"],config:{model:"FRIENDAPP.model.userExpenModel",autoload:true,storeId:"UserExpenseStore",sorters:{property:"amount",direction:"ASC"},grouper:{groupFn:function(a){return a.get("date")}},proxy:{type:"localstorage",id:"Expen"}}});Ext.define("FRIENDAPP.store.DailyExpenseStore",{extend:"Ext.data.JsonStore",requires:["Ext.data.proxy.LocalStorage"],config:{model:"FRIENDAPP.model.userExpenModel",autoload:true,storeId:"DailyExpenseStore",proxy:{type:"localstorage",id:"Daily"}}});Ext.define("FRIENDAPP.store.UserDataStore",{extend:"Ext.data.JsonStore",requires:["Ext.data.proxy.LocalStorage"],config:{model:"FRIENDAPP.model.UserDataModel",autoload:true,storeId:"UserDataStore",proxy:{type:"localstorage",id:"UserData"}}});Ext.define("FRIENDAPP.store.MonthStore",{extend:"Ext.data.JsonStore",requires:["Ext.data.proxy.Memory"],config:{model:"FRIENDAPP.model.GraphModel",autoload:true}});Ext.define("FRIENDAPP.store.YearStore",{extend:"Ext.data.JsonStore",requires:["Ext.data.proxy.Memory"],config:{model:"FRIENDAPP.model.YearModel",autoload:true}});Ext.define("FRIENDAPP.view.Dashboard",{xtype:"dashboard",extend:"Ext.Panel",requires:[],config:{layout:{type:"vbox",align:"middle"},cls:"dashboardPanelCls",width:"100%",height:10,expand:false,title:"Dashboard",items:[{xtype:"panel",width:"100%",height:"50%",layout:{type:"hbox"},items:[{xtype:"button",height:"100%",flex:1,cls:"toolbarButton",iconCls:"calendarCls",action:"calendar"},{xtype:"button",height:"100%",flex:1,cls:"toolbarButton",iconCls:"reportCls",action:"report"},{xtype:"button",height:"100%",flex:1,cls:"toolbarButton",iconCls:"graphCls",action:"graph"},]},{xtype:"panel",width:"100%",height:"50%",layout:{type:"hbox"},items:[{xtype:"button",height:"100%",flex:1,cls:"toolbarButton",iconCls:"settingsCls",action:"settings"},{xtype:"button",height:"100%",flex:1,cls:"toolbarButton",iconCls:"themeCls",action:"theme"},{xtype:"button",height:"100%",flex:1,id:"logoutButtonHit",cls:"toolbarButton",iconCls:"logoutCls",action:"logout"},]},]}});Ext.define("FRIENDAPP.view.Theme",{extend:"Ext.Panel",requires:[""],xtype:"themePanel",config:{fullscreen:true,itemId:"themePanel",layout:{type:"vbox",align:"middle",pack:"center"},items:[{xtype:"toolbar",title:"Theme",width:"100%",docked:"top"},{xtype:"spacer"},{xtype:"button",text:"Default",itemId:"defaultThemeButton",width:"80%",height:50},{xtype:"spacer"},{xtype:"button",text:"Black",itemId:"blackThemeButton",width:"80%",height:50},{xtype:"spacer"},{xtype:"button",text:"Pink",itemId:"pinkThemeButton",width:"80%",height:50},{xtype:"spacer"},]}});Ext.define("FRIENDAPP.services.LoginServices",{singleton:true,loginAuthentication:function(c,e,g){var f=c.username;var b=c.password;var d=Ext.getStore("UserDataStore");d.load();if(f===d.getById(1).get("username")&&b===d.getById(1).get("password")){var a={code:"200",message:"Right Credentials.."};return e(a)}else{var a={code:"400",message:"Wrong Credentials.Please input correct Credentials and try again!........"};return g(a)}}});Ext.define("FRIENDAPP.util.util",{singleton:true,isBlank:function(a){if(a==null||a==undefined){return true}if(typeof a!=="string"){return false}if(a.trim().length===0){return true}return false},themeSelector:function(){var e,b,c,d;for(e=0;(b=document.getElementsByTagName("link")[e]);e++){if(b.getAttribute("rel").indexOf("style")!=-1){c=b.href;if(c.lastIndexOf("main.css")===-1&&c.lastIndexOf("Ext.ux.TouchCalendarView.css")===-1){return b}}}}});Ext.define("FRIENDAPP.view.userExpenListView",{extend:"Ext.form.Panel",xtype:"userExpenListView1",scrollable:false,requires:["FRIENDAPP.store.UserExpenseStore","FRIENDAPP.model.userExpenModel","Ext.dataview.List"],config:{layout:"fit",iconCls:"info",scrollable:false,cls:"listCls",items:[{xtype:"list",cls:"userExpenseList",itemCls:"userExpenseItem",store:"UserExpenseStore",itemTpl:'<div class="amountCls">Amount:&nbsp;{amount}</div><div class="expenseCls">{expen}</div>',itemId:"expenseList",onItemDisclosure:true},{xtype:"toolbar",docked:"bottom",items:[{iconMask:true,itemId:"totalAmtLabel",ui:"plain"},{xtype:"spacer"},{iconMask:true,cls:"addButton",ui:"plain",iconCls:"addIconCls",itemId:"expenAdd"}]}]}});Ext.define("FRIENDAPP.view.AddExpenForm",{extend:"Ext.form.FormPanel",xtype:"AddExpenForm",requires:["Ext.form.FieldSet","Ext.field.Text","Ext.field.DatePicker","Ext.field.Number"],config:{iconMask:true,ui:"confirm-round",iconCls:"compose",title:"Add Expen",styleHtmlContent:true,scrollable:false,cls:"loginview",height:"100%",width:"100%",layout:{type:"vbox",align:"middle"},items:[{xtype:"toolbar",docked:"bottom",items:[{text:"Save",itemId:"expenseFormSave",hidden:true},{text:"Update",itemId:"expenseFormUpdate",hidden:true},{xtype:"spacer"},{text:"Reset",itemId:"expenseFormReset",hidden:true},{text:"Delete",itemId:"expenseFormDelete",hidden:true},]},{xtype:"spacer"},{xtype:"fieldset",width:"100%",cls:"expenfieldcls",height:"100%",items:[{xtype:"datepickerfield",name:"date",itemId:"date",label:"Date",hidden:true,value:new Date(),dateFormat:"d/m/Y",picker:{yearFrom:2011,dateFormat:"d/m/Y"}},{xtype:"numberfield",name:"amount",itemId:"amount",label:"Amount"},{xtype:"textareafield",name:"expen",itemId:"expen",label:"Expen Text",height:"80%",useclearicon:true,placeholder:"Mail Content"},]},{xtype:"panel",itemId:"formValidateMsg",height:"50px",cls:"validatemsg",width:"90%"},{xtype:"spacer"},]}});Ext.define("FRIENDAPP.view.GraphChart",{extend:"Ext.Panel",xtype:"graphChart",requires:["Ext.chart.axis.Numeric","Ext.chart.axis.Category","Ext.chart.series.Bar","Ext.draw.engine.ImageExporter","FRIENDAPP.store.DailyExpenseStore","FRIENDAPP.store.MonthStore","Ext.chart.interactions.ItemHighlight","Ext.chart.interactions.Manager","Ext.chart.interactions.ItemInfo","Ext.chart.interactions.ItemCompare"],config:{width:"100%",layout:"card",activeItem:1,items:[{xtype:"toolbar",title:"Balance Graph",width:"100%",docked:"top"},{xtype:"panel",width:"100%",height:"20%",docked:"bottom",layout:{type:"vbox",align:"middle"},items:[{xtype:"fieldset",width:"80%",items:[{xtype:"datepickerfield",name:"graphdate",label:"Select Year",labelWidth:"60%",itemId:"date",width:"100%",value:new Date(),dateFormat:"Y",picker:{yearFrom:2011,dateFormat:"Y",yearTo:2015,slotOrder:["year"]}}]}]},{title:"Emerging Balance",cls:"graphPanelCls",xtype:"chart",action:"chart",name:"monthChart",width:"100%",flex:1,animate:true,store:"MonthStore",gradients:[{id:"v-0",angle:0,stops:{0:{color:"rgb(227, 148, 39)"},100:{color:"rgb(227, 148, 39)"}}},{id:"v-1",angle:0,stops:{0:{color:"rgb(243, 72, 109)"},100:{color:"rgb(243, 72, 109)"}}},],axes:[{type:"Category",position:"left",fields:["month"],title:"Date",minimum:0},{type:"Numeric",position:"bottom",label:{renderer:function(a){return a.toFixed(0)}},minimum:0,fields:["amount"],title:"Amount"}],series:[{type:"bar",axis:"bottom",highlight:true,renderer:function(d,e,c,b,a){if(b%2==0){c.fill="url(#v-0)"}else{c.fill="url(#v-1)"}return c},xField:"date",yField:["amount"]}],interactions:[{type:"iteminfo",gesture:"tap",listeners:{show:function(c,d,b){b.setTop(0);b.setCentered(true);b.setZIndex(90);b.setWidth("70%");b.setHeight("40%");var a=d.storeItem;b.setHtml("<ul><li><b>Month:</b> "+a.data.month+"</li><li><b>Year: </b>"+a.data.year+"</li><li><b>Amount: </b>"+a.data.amount+"</li></ul>")}}}]},{xtype:"panel",height:5,cls:"ribbonCls",width:"100%",docked:"top"},]}});Ext.define("FRIENDAPP.view.ExpenReport",{extend:"Ext.form.Panel",xtype:"ExpenReport",scrollable:false,requires:["FRIENDAPP.store.UserExpenseStore","FRIENDAPP.model.userExpenModel","Ext.dataview.List"],config:{layout:"fit",iconCls:"info",scrollable:false,cls:"listCls",items:[{xtype:"list",cls:"userExpenseList",itemCls:"userExpenseItem",grouped:true,store:"UserExpenseStore",itemTpl:'<div><span class="expenRptClassText">{expen}</span><br><span>Amount : </span><span class="expenRptClassAmount">{amount} Rs.</span></div>',itemId:"expenseListReport",onItemDisclosure:true}]}});Ext.define("FRIENDAPP.view.Main",{extend:"Ext.Panel",requires:["FRIENDAPP.view.Dashboard"],xtype:"mainPanel",id:"MainPanel",config:{fullscreen:true,layout:"card",activeItem:0,items:[{xtype:"loginview"},{xtype:"MainFrameview"},{xtype:"dashboard",docked:"bottom",hidden:true},]}});Ext.define("FRIENDAPP.controller.LoginController",{extend:"Ext.app.Controller",requires:["FRIENDAPP.services.LoginServices"],config:{refs:{loginFormPanel:"loginview",loginButton:"loginview #loginButton",rememberPassword:"loginview #rememberPassword",usernameField:"loginview textfield[name=username]",passwordField:"loginview textfield[name=password]",errorMsg:"loginview #validateMessage"},control:{loginButton:{tap:"onLoginTap"},loginFormPanel:{activate:"onSignedIn"}}},onLoginTap:function(){var e=this.getLoginFormPanel();var c=this.getErrorMsg();c.setHtml("");var a=e.getValues();FRIENDAPP.services.LoginServices.loginAuthentication(a,function d(f){setIndicator(f.message);FRIENDAPP.app.getController("LoginController").onSignedChange();setTimeout(function(){evaluateMap();setHomeScreen()},2000)},function b(f){c.setHtml('<font color="white" size="2"><center>'+f.message+"</center></font>");clearPasswordField()});this.calculateStore()},onSignedIn:function(){var a=Ext.getStore("UserDataStore");a.load();if(a.getById(1).get("status")==="yes"){setIndicator("Loading...");this.getUsernameField().setValue(a.getById(1).get("username"));this.getPasswordField().setValue(a.getById(1).get("password"));setTimeout(function(){evaluateMap();setHomeScreen()},3000);this.calculateStore();this.getRememberPassword().setChecked(true)}else{if(a.getById(1).get("status")==="no"){this.getRememberPassword().setChecked(false)}}},onSignedChange:function(){if(this.getRememberPassword().getChecked()){var a=Ext.getStore("UserDataStore");var b=a.getById(1);b.set("status","yes");a.sync();a.load()}},calculateStore:function(){var k=Ext.getStore("DailyExpenseStore");k.clearFilter();k.load();var d=[];var l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var m;for(var c=0;c<k.getCount();c++){m=k.getAt(c).data.date;var h=new Date(m).getFullYear();Ext.Array.include(d,h)}var e=Ext.getStore("YearStore");var j=Ext.getStore("MonthStore");j.removeAll(true);e.removeAll(true);var c,a,g,f,b;g=0,b=0;for(g=0;g<d.length;g++){k.clearFilter();c=0,a=0,f=0;k.filter(function(n){var i=new Date(n.get("date")).getFullYear();if(i===d[g]){return true}});while(k.getCount()>c){a=a+k.getAt(c).get("amount");c++}e.add({amount:a,year:d[g]});for(b=0;b<l.length;b++){f=0,c=0;k.clearFilter();k.filter(function(n){var i=new Date(n.get("date")).getFullYear();var o=l[new Date(n.get("date")).getMonth()];if(i===d[g]&&o==l[b]){return true}});while(k.getCount()>c){f=f+k.getAt(c).get("amount");c++}if(f>0){j.add({amount:f,month:l[b],year:d[g]})}}}}});function evaluateMap(){Ext.Viewport.setMasked(false)}function setIndicator(a){Ext.Viewport.setMasked({xtype:"loadmask",cls:"maskCls",message:a,indicator:true})}function setHomeScreen(){var a=Ext.getCmp("MainPanel");var b=FRIENDAPP.app.getController("DashboardController").getCalendarButton();b.addCls("activeCls");FRIENDAPP.app.getController("DashboardController").activeButton=b;a.setActiveItem(1);return}function clearPasswordField(){var a=Ext.getCmp("passwordid");if(a){a.reset()}}Ext.define("FRIENDAPP.controller.ExpenFormController",{extend:"Ext.app.Controller",requires:["FRIENDAPP.util.util"],config:{refs:{expenseList:"userExpenListView1",expenList:"userExpenListView1 #expenseList",mainFrame:"MainFrameview",addExpenForm:"AddExpenForm",delButton:"AddExpenForm #expenseFormDelete",updateButton:"AddExpenForm #expenseFormUpdate",saveButton:"AddExpenForm #expenseFormSave",resetButton:"AddExpenForm #expenseFormReset",expenAddBut:"userExpenListView1 #expenAdd",dateField:"AddExpenForm #date",amountField:"AddExpenForm #amount",mainFrameCal:"MainFrameCalender",expenField:"AddExpenForm #expen",formValidateMsg:"AddExpenForm #formValidateMsg"},control:{resetButton:{tap:"itemReset"},saveButton:{tap:"itemSave"},updateButton:{tap:"itemUpdate"},delButton:{tap:"itemDelete"}}},itemReset:function(){var a=this.getAddExpenForm();this.getFormValidateMsg().setHtml("");a.reset()},itemSave:function(){if(this.dataValidate()){var a=Ext.getStore("UserExpenseStore");a.add({amount:this.getAmountField().getValue(),expen:this.getExpenField().getValue(),date:Ext.util.Format.date(this.getDateField().getValue(),"d M Y ")});a.sync();a.load();this.getMainFrameCal().setActiveItem(this.getExpenseList());FRIENDAPP.app.getController("ExpenListController").calculateOtherStores()}},itemUpdate:function(){if(this.dataValidate()){var a=Ext.getStore("UserExpenseStore");var b=(this.getExpenList().getSelection());var c=a.getById(b[0].data.id);c.set("date",Ext.util.Format.date(this.getDateField().getValue(),"d M Y "));c.set("amount",this.getAmountField().getValue());c.set("expen",this.getExpenField().getValue());a.sync();a.load();this.getMainFrameCal().setActiveItem(this.getExpenseList());FRIENDAPP.app.getController("ExpenListController").calculateOtherStores()}},itemDelete:function(){var a=Ext.getStore("UserExpenseStore");var b=(this.getExpenList().getSelection());a.remove(a.getById(b[0].data.id));a.sync();a.load();this.getMainFrameCal().setActiveItem(this.getExpenseList());FRIENDAPP.app.getController("ExpenListController").calculateOtherStores()},dataValidate:function(){if(!this.getAmountField().getValue()||FRIENDAPP.util.util.isBlank(this.getAmountField().getValue())){this.getFormValidateMsg().setHtml("Please enter amount !...");return false}if(this.getAmountField().getValue()<=0){this.getFormValidateMsg().setHtml("Please enter amount !...");return false}if(!this.getExpenField().getValue()||FRIENDAPP.util.util.isBlank(this.getExpenField().getValue())){this.getFormValidateMsg().setHtml("Please enter expen Text !...");return false}return true}});Ext.define("FRIENDAPP.view.MainFrameCalender",{extend:"Ext.Panel",requires:["FRIENDAPP.view.userExpenListView","FRIENDAPP.view.AddExpenForm",],xtype:"MainFrameCalender",config:{fullscreen:true,layout:"card",title:"Email",activeItem:0,items:[{xtype:"toolbar",cls:"mainToolbar",docked:"top",itemId:"dateLabel",title:"My Pocket Finder",name:"dateLabel",items:[{xtype:"button",iconMask:true,ui:"back",action:"back",width:60,text:"BACK",itemId:"backButton"},{xtype:"spacer"}]},{xtype:"panel",height:5,cls:"ribbonCls",width:"100%",docked:"top"},{xtype:"touchcalendar",title:"Calendar",iconCls:"Calendar"},]}});Ext.define("FRIENDAPP.view.MainFrameChart",{extend:"Ext.Panel",requires:["FRIENDAPP.view.GraphChart"],xtype:"MainFrameChart",config:{fullscreen:true,layout:"card",activeItem:0,items:[{xtype:"graphChart"}]}});Ext.define("FRIENDAPP.view.MainFrameReport",{extend:"Ext.Panel",requires:["FRIENDAPP.view.ExpenReport","Ext.field.Select","Ext.field.DatePicker"],xtype:"MainFrameReport",config:{fullscreen:true,layout:"card",activeItem:0,items:[{xtype:"toolbar",docked:"top",items:[{text:"Total Amount",ui:"plain",itemId:"reportTotalText"}]},{xtype:"panel",height:5,cls:"ribbonCls",width:"100%",docked:"top"},{xtype:"ExpenReport"},{xtype:"panel",cls:"formPanelCls",width:"100%",docked:"bottom",layout:"vbox",items:[{xtype:"datepickerfield",name:"dayWise",hidden:false,itemId:"dayWise",width:"100%",value:new Date(),dateFormat:"d-M-Y",picker:{yearFrom:2011,dateFormat:"d/m/Y",yearTo:2015,slotOrder:["day","month","year"]}},{xtype:"datepickerfield",name:"monthWise",itemId:"monthWise",hidden:true,width:"100%",value:new Date(),dateFormat:"M-Y",picker:{yearFrom:2011,dateFormat:"d/m/Y",yearTo:2015,slotOrder:["month","year"]}},{xtype:"datepickerfield",name:"yearWise",itemId:"yearWise",hidden:true,value:new Date(),dateFormat:"Y",picker:{yearFrom:2011,dateFormat:"d/m/Y",yearTo:2015,slotOrder:["year"]}},{xtype:"selectfield",name:"select_type",itemId:"select_type",options:[{text:"Day Wise",value:"day"},{text:"Month Wise",value:"month"},{text:"Year Wise",value:"year"},{text:"Refresh Data",value:"refresh"}]}]}]}});Ext.define("FRIENDAPP.view.MainFrame",{extend:"Ext.Panel",requires:["Ext.TitleBar","FRIENDAPP.view.MainFrameCalender","FRIENDAPP.view.MainFrameChart","FRIENDAPP.view.MainFrameReport","FRIENDAPP.view.Theme"],xtype:"MainFrameview",config:{fullscreen:true,layout:"card",activeItem:0,items:[{xtype:"button",iconMask:true,iconCls:"dashboardIconCls",ui:"dashboard",action:"dashboard",width:"100%",itemId:"dashboardButton",docked:"bottom"},{xtype:"MainFrameCalender",action:"calendar"},{xtype:"MainFrameChart",action:"graph"},{xtype:"MainFrameReport",action:"report"},{xtype:"MainFrameLicenceView",action:"settings"},{xtype:"themePanel",action:"theme"}]}});Ext.define("FRIENDAPP.controller.DashboardController",{extend:"Ext.app.Controller",requires:["FRIENDAPP.view.MainFrame"],activeButton:null,config:{refs:{dashboardButton:"MainFrameview button[action=dashboard]",dashboard:"mainPanel dashboard",calendarButton:"dashboard button[action=calendar]",graphButton:"dashboard button[action=graph]",reportButton:"dashboard button[action=report]",settingsButton:"dashboard button[action=settings]",logoutButton:"dashboard button[action=logout]",themeButton:"dashboard button[action=theme]",expenReportView:"ExpenReport",mainFrameCal:"MainFrameCalender",mainFrame:"MainFrameview",mainPanel:"mainPanel",graphChart:"graphChart",monthChart:"graphChart chart[name=monthChart]",yearChart:"graphChart chart[name=yearChart]",dailyChart:"graphChart chart[name=dailyChart]",hintPanel:"panel[name=hint]",mainFrameLicenceView:"MainFrameLicenceView",updateButton:"FormPasswordChange #btn_pass_update",saveButton:"FormPasswordChange #btn_pass_save",rememberPassword:"loginview #rememberPassword"},control:{dashboardButton:{tap:"onDashboard"},calendarButton:{tap:"onScreenSelection"},graphButton:{tap:"onScreenSelection"},reportButton:{tap:"onScreenSelection"},settingsButton:{tap:"onScreenSelection"},logoutButton:{tap:"onScreenSelection"},themeButton:{tap:"onScreenSelection"},graphChart:{activeitemchange:"ónGraphChange"}}},onDashboard:function(){if(this.getDashboard().getHidden()==true){this.getDashboard().show();this.growDashboard()}else{this.shrinkDashboard()}},growDashboard:function(){var a=this;setTimeout(function(){var b=a.getDashboard().getHeight()+20;if(b<135){a.getDashboard().setHeight(b);a.growDashboard()}},1)},shrinkDashboard:function(){var a=this;setTimeout(function(){var b=a.getDashboard().getHeight()-20;if(b>0){a.getDashboard().setHeight(b);a.shrinkDashboard()}else{a.getDashboard().hide()}},1)},onScreenSelection:function(c,d,b){this.onDashboard();if(this.activeButton!==null){this.activeButton.removeCls("activeCls")}this.activeButton=c;c.addCls("activeCls");switch(c.config.action){case"calendar":this.getMainFrame().setActiveItem(0);this.getMainFrameCal().setActiveItem(0);break;case"graph":this.getMainFrame().setActiveItem(1);var a=Ext.getStore("DailyExpenseStore");a.load();a.clearFilter();Ext.getStore("MonthStore").clearFilter();FRIENDAPP.app.getController("GraphController").onGraphFilter(null,new Date());this.getMonthChart().setData(Ext.getStore("MonthStore").getData());var f=Ext.create("Ext.Panel",{layout:"vbox",name:"hint",html:"<center><small>Tap any bar to show total information<small><center>",height:50,width:"80%",bottom:"10%",left:"10%",floating:true});Ext.Viewport.add(f);setTimeout(function(){f.setHidden(true);f.destroy()},2000);break;case"report":this.getMainFrame().setActiveItem(2);var a=Ext.getStore("UserExpenseStore");a.clearFilter();a.load();break;case"logout":this.activeButton.removeCls("activeCls");this.getDashboard().hide();var a=Ext.getStore("UserDataStore");var g=a.getById(1);g.set("status","no");a.sync();a.load();this.getRememberPassword().enable();this.getMainFrame().setActiveItem(0);this.getMainFrameCal().setActiveItem(0);this.getMainPanel().setActiveItem(0);clearLoginFields();break;case"settings":this.getMainFrame().setActiveItem(3);this.getMainFrameLicenceView().setActiveItem(1);this.getUpdateButton().setHidden(false);this.getSaveButton().setHidden(true);break;case"theme":this.getMainFrame().setActiveItem(4);break}}});function clearLoginFields(){var b=Ext.getCmp("passwordid");var a=Ext.getCmp("usernameid");if(b||a){b.reset();a.reset();return}}Ext.application({controllers:["Main","LoginController","ExpenListController","ExpenFormController","DashboardController","ExpenReportController","LicenceController","PasswordChangeController","GraphController","ThemeController"],stores:["UserExpenseStore","DailyExpenseStore","UserDataStore","MonthStore","YearStore"],models:["userExpenModel","UserDataModel","GraphModel","YearModel"],name:"FRIENDAPP",requires:["Ext.MessageBox","Ext.ux.TouchCalendar","Ext.Img","Ext.ux.TouchCalendarView","Ext.util","Ext.draw"],views:["Main","Login","MainFrame","LicenceView","Licence","PasswordChange"],icon:{57:"resources/icons/Icon.png",72:"resources/icons/Icon~ipad.png",114:"resources/icons/Icon@2x.png",144:"resources/icons/Icon~ipad@2x.png"},phoneStartupScreen:"resources/loading/Homescreen.jpg",tabletStartupScreen:"resources/loading/Homescreen~ipad.jpg",launch:function(){var a=Ext.getStore("UserDataStore");a.load();if(null!=a.getById(1)){Ext.Viewport.add(Ext.create("FRIENDAPP.view.Main"))}else{Ext.Viewport.add(Ext.create("FRIENDAPP.view.LicenceView"))}},onUpdated:function(){Ext.Msg.confirm("Application Update","This application has just successfully been updated to the latest version. Reload now?",function(){window.location.reload()})}});